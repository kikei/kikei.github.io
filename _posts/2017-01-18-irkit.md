---
layout: post
title:  "IRKit経由でうちのエアコンをON/OFFする"
categories: home
---

IRKit経由でエアコンをON/OFFするシェル。

### うちのエアコン

BEAVERのSRK228。衝撃の97年製である。

しかし赤外線リモコンで操作できる機能はあるので、IRKit経由でも操作することができる。

### 事前準備

お手持ちのIRKitの `deviceid` と `clientkey` が必要。

正攻法としては、[IRKit HTTP API](http://getirkit.com/)を使って取得することができる。

自分は面倒くさかったので、AndroidのIRKitアプリでデバイスの詳細情報から調べた。

### ONする

`clientkey` と `deviceid` は自分のものに置き換えること。

```
curl -i "https://api.getirkit.com/1/messages" \
     -d "clientkey=$CLIENTKEY" \
     -d "deviceid=$DEVICEID" \
     -d 'message={"format":"raw","freq":38,"data":[11529,14668,1037,6881,1037,6881,1037,6881,1037,6881,1037,6881,1037,6881,1037,6881,1037,6881,1037,2911,1002,2911,1002,2911,1002,2911,1002,2911,1002,2911,1002,2911,1002,2911,1002,6881,1002,6881,1002,2813,1002,2813,1002,2813,1002,2813,1002,6881,1037,2813,1002,2813,1002,2813,1002,6881,1002,6881,1002,6881,1002,6881,1002,2911,1002,6881,1002,6881,1002,2813,1002,6881,1037,2911,1002,6881,1002,2911,1002,2911,1002,2911,1002,2911,1002,6881,1002,2911,1002,6881,1037,2813,1002,6881,1002,6881,1002,6881,1002,14668,1002]}'
```

### OFFする

ONと同じ要領で。

```
curl -i "https://api.getirkit.com/1/messages" \
     -d 'clientkey=$CLIENTKEY' \
     -d 'deviceid=$DEVICEID' \
     -d 'message={"format":"raw","freq":38,"data":[11529,14668,1037,6881,1037,6881,1037,6881,1037,6881,1037,6881,1037,6881,1037,6881,1037,6881,1037,2813,1037,2813,1037,2813,1037,2813,1037,2813,1037,2813,1037,2813,1037,2813,1037,6881,1037,6881,1037,2813,1037,6881,1037,2911,1037,2911,1037,6881,1037,2813,1037,2813,1037,2813,1037,6881,1037,2813,1037,6881,1037,6881,1037,2813,1037,6881,1037,6881,1037,2813,1037,6881,1037,2911,1037,6881,1037,2813,1037,2813,1037,2813,1037,2813,1037,6881,1037,2813,1037,6881,1037,2813,1037,6881,1037,6881,1037,6881,1037,14668,1037]}'
```

### 外出先から操作

IFTTT経由でIRkitのHTTP APIを実行できるようにすれば、WebさえあればどこからでもエアコンのON/OFFができるようになる。

下記ブログがわかりやすい。

- [IFTTTのmaker channelを使ってIRKitを操作する - hello-world.jp.net](https://blog.hello-world.jp.net/irkit/3462/)

